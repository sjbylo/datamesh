kind: Job
apiVersion: batch/v1
metadata:
  name: job-annotate-sc
  namespace: openshift-storage
spec:
  template:
    spec:
      containers:
      - image: image-registry.openshift-image-registry.svc:5000/openshift/cli:latest
        command:
        - /bin/bash
        - -ce
        - |
          oc annotate --overwrite sc/lvms-{{ .Values.lvms.volumeGroup }} storageclass.kubernetes.io/is-default-class=true
          set +e
          oc get sc -oname | grep -v /lvms-{{ .Values.lvms.volumeGroup }}$| while read line; do oc annotate --overwrite $line storageclass.kubernetes.io/is-default-class-; done
        name: annotate-sc
      dnsPolicy: ClusterFirst
      restartPolicy: Never
      serviceAccount: default
      serviceAccountName: default
      terminationGracePeriodSeconds: 400
